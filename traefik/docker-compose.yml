version: '2'
services:
    proxy:
        image: traefik:1.7
        command: --configFile=/traefik.toml
        restart: unless-stopped
        networks:
            - web
        ports:
            - 80:80
            - 443:443
        labels:
            - traefik.enable=true
            - traefik.frontend.rule=Host:proxy.example.com #changeme
            - traefik.port=8080
            - traefik.docker.network=web
            # You can put a password here - it expects a hashed passwd generated by htpasswd
            #- "traefik.frontend.auth.basic=admin:<hashed password here>"
        volumes: 
            - /var/run/docker.sock:/var/run/docker.sock 
            # Update these volumes to reflect where you'll keep your config on your docker host
            - /opt/docker/traefik/traefik.toml:/traefik.toml 
            - /opt/docker/traefik/acme.json:/acme.json 
networks: 
    web: 
        external: true